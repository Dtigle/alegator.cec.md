<div class="box" data-bind="visible: !BallotPaperNotFound() && BallotPaper() != null">
    <div class="box-content" data-bind="with: BallotPaper">
        <table class="table" data-bind="visible: electionResultsVM.UnconfirmedBallotPapers().length === 0">
            <tr>
                <td>
                    <span class="badge">a)</span>
                    Numărul de alegători incluşi în listele electorale de bază
                </td>

                <td data-bind="validationElement: RegisteredVoters">
                    <input disabled class="form-control number" data-bind="value: RegisteredVoters" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">b)</span>
                    Numărul de alegători incluși în listele electorale suplimentare
                </td>

                <td data-bind="validationElement: Supplementary">
                    <input disabled class="form-control number" data-bind="value: Supplementary" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">c)</span>
                    Numărul de alegători care au primit buletine de vot

                    <div data-bind="visible: !BallotsIssued.isValid() && !BallotsIssued_Rule1_Succeeded() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span><code>c ≤ a + b</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsIssued"></span>
                        </div>
                    </div>

                    <div data-bind="visible: !BallotsIssued.isValid() && !BallotsIssued_Rule2_Succeeded() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span><code>c ≥ d</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsIssued"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsIssued">
                    <input disabled class="form-control number" data-bind="value: BallotsIssued" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">d)</span>
                    Numărul de alegători care au participat la votare

                    <div data-bind="visible: !BallotsCasted.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>d = f + h</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsCasted"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsCasted">
                    <input disabled class="form-control number" data-bind="value: BallotsCasted" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">e)</span>
                    Cifra ce reflectă diferența dintre numărul buletinelor de vot primite de alegători şi numărul alegătorilor care au participat la votare

                    <div data-bind="visible: !DifferenceIssuedCasted.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>e = c - d</code><br />
                            <span class="text-danger" data-bind="validationMessage: DifferenceIssuedCasted"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: DifferenceIssuedCasted">
                    <input disabled class="form-control number" data-bind="value: DifferenceIssuedCasted" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">f)</span>
                    Numărul buletinelor de vot declarate nevalabile(buletinele extrase din urna de vot şi declarate nevalabile)

                    <div data-bind="visible: !DifferenceIssuedCasted.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>f = d - h</code><br />
                            <span class="text-danger" data-bind="validationMessage: DifferenceIssuedCasted"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsSpoiled">
                    <input disabled class="form-control number" data-bind="value: BallotsSpoiled" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">h)</span>
                    Numărul total de voturi valabil exprimate

                    <div data-bind="visible: !BallotsValidVotes.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>h = g1 + g2 + g3 + ... + gn</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsValidVotes"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsValidVotes">
                    <input disabled class="form-control number" data-bind="value: BallotsValidVotes" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">i)</span>
                    Numărul buletinelor de vot primite de consiliul electoral de circumscripție

                    <div data-bind="visible: !BallotsReceived.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>i = c + j</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsReceived"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsReceived">
                    <input disabled class="form-control number" data-bind="value: BallotsReceived" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td>
                    <span class="badge">j)</span>
                    Numărul buletinelor de vot neutilizate şi anulate (inclusiv buletinele de vot completate greșit şi anulate)

                    <div data-bind="visible: !BallotsUnusedSpoiled.isValid() && ShowValidationErrors()">
                        <div class="alert alert-danger">
                            <span>Regula:</span>
                            <code>j = i – c</code><br />
                            <span class="text-danger" data-bind="validationMessage: BallotsUnusedSpoiled"></span>
                        </div>
                    </div>
                </td>

                <td data-bind="validationElement: BallotsUnusedSpoiled">
                    <input disabled class="form-control number" data-bind="value: BallotsUnusedSpoiled" maxlength="10" />
                </td>
            </tr>

            <tr>
                <td colspan="2">
                    <table class="table ">
                        <thead>
                            <tr>
                                <th>g</th>
                                <th id="titleParty">Concurenţii electorali (în ordinea înscrierii în buletinul de vot)</th>
                                <th>Numărul de voturi valabil exprimate</th>
                            </tr>
                        </thead>

                        <tbody data-bind="foreach: CompetitorResults">
                            <tr>
                                <td class="col-xs-1"><span class="badge">g<span data-bind="text: BallotOrder"></span>)</span></td>
                                <td class="col-xs-4">
                                    <strong data-bind="text: CandidateName"></strong>
                                    <p data-bind="text: PoliticalPartyName"></p>
                                </td>
                                <td class="col-xs-2">
                                    <input disabled class="form-control number" maxlength="10"
                                           data-bind="value: BallotCount" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </table>


        <div class="alert alert-success" data-bind="visible: $parent.InCallMode">
            Rugăm așteptați...
            <div class="progress progress-striped active">
                <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
            </div>
        </div>

        <div class="alert alert-warning" data-bind="visible: electionResultsVM.UnconfirmedBallotPapers().length === 0">
            <div class="text-center">
                <div>Verificați corectitudinea întocmirii procesului-verbal după următoarele formule:</div>
                <div>
                    <code>c≤a+b</code> <code>c≥d</code> <code>d=f+h</code> <code>e=c-d</code>
                    <code>h=g1+g2+g3+….gn</code> <code>i=c+j</code><code>j=i-c</code>
                </div>
            </div>
        </div>

        <div data-bind="visible: electionResultsVM.UnconfirmedBallotPapers().length > 0">
            <div class="alert alert-danger">
                <p>
                    Pentru următoarele secții de votare nu au fost confirmate rezultatele alegerilor:
                </p>

                <ul data-bind="foreach: { data: electionResultsVM.UnconfirmedBallotPapers, as: 'unconfirmedBallotPaper'}">
                    <li>
                        <span data-bind="html: unconfirmedBallotPaper.PollingStationNumber"></span>.
                        <span data-bind="html: unconfirmedBallotPaper.PollingStationName"></span>
                    </li>
                </ul>
            </div>
        </div>

        <div data-bind="template: {name: getStatusBarTemplate}, visible: ShowValidationErrors() || AlreadySent()"></div>

        <div class="report-actions">
            <button type="button" class="btn-lg btn board-btn-lg long-name btn-primary"
                    data-bind="click: Validate, visible: !AlreadySent()">
                <span>Verifică document</span>
            </button>

            <input type="button" class="btn-lg btn pull-right board-btn-lg long-name btn-danger complete-automatically-btn"
                   value="Completare automată"
                   data-bind="click: CompleteAutomatically, visible: !AlreadySent()" />

            <input type="button" class="btn-lg btn pull-right board-btn-lg btn-danger"
                   value="Vizualizare și Tipar"
                   data-bind="click: PrintDocument" />

            <input type="button" class="btn-lg btn pull-right board-btn-lg btn-danger"
                   value="Transmite"
                   data-bind="click: SubmitResults, disable: $parent.InCallMode() || !isValid(), visible: !AlreadySent()" />
        </div>

        <div data-bind="visible: !AlreadySent()">
            <div class="row">
                <div class="col-xs-12">
                    <valid-submission-notification params="isValid: isValid && isCompletedAutomatically, electionName: $root.Delimitator().SelectedElection()">
                    </valid-submission-notification>
                </div>
            </div>
        </div>

        <div class="well" data-bind="visible: AllowSubmitConfirmation()">
            <div class="row">
                <div class="col-xs-12">
                    <div class="col-xs-3">
                        <button type="button" class="btn-lg btn board-btn-lg btn-primary"
                                data-bind="click: Validate">
                            <span>Verifică <br /> procesul verbal</span>
                        </button>
                    </div>

                    <div class="col-xs-6 text-center">
                        @*<p data-bind="visible: isValid()">
                            Procesul verbal pentru scrutinul <b><span data-bind="text: $root.UserData().SelectedElection"></span></b> este corect întocmit.<br>
                            Acum puteți expedia procesul verbal.<br>
                            Procesul verbal expediat nu va mai fi disponibil pentru modificare.
                        </p>*@
                    </div>

                    <div class="col-xs-3">
                        <input type="button" class="btn-lg pull-right board-btn-lg btn"
                               value="Confirmare"
                               data-bind="visible: AllowSubmitConfirmation(), disable: $parent.InCallMode() || !isValid(), click: ConfirmResults" />
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="alert alert-success" data-bind="visible: electionResultsVM.InCallMode">
    Rugăm așteptați...
    <div class="progress progress-striped active">
        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
    </div>
</div>